# 智趋3D交互系统软件说明书

## 1. 软件概述

### 1.1 软件名称
智趋3D交互系统（ZhiTrend 3D Interactive System）

### 1.2 版本信息
版本号：V0.1.0

### 1.3 软件简介
智趋3D交互系统是一款基于Web的三维模型交互应用，集成了3D模型展示、语音交互、手势控制等功能，通过人工智能技术实现与用户的自然交互。该系统采用现代前端技术栈开发，具有高度的交互性和沉浸感，可应用于虚拟展示、教育培训、人机交互研究等多个领域。

### 1.4 开发背景与目的
随着元宇宙、虚拟现实等技术的发展，三维交互界面正成为人机交互的重要发展方向。本软件旨在探索基于Web平台的轻量级3D交互方案，结合大语言模型技术，为用户提供自然、直观的三维内容交互体验，降低用户使用3D应用的门槛，推动3D技术在各行业的普及应用。

## 2. 功能特点

### 2.1 核心功能

#### 2.1.1 三维模型展示
- 支持加载和渲染GLB/GLTF格式的3D模型
- 提供模型旋转、缩放、平移等基础操作
- 自动检测和播放模型动画
- 具备模型加载进度显示功能

#### 2.1.2 AI对话交互
- 集成Ollama本地大语言模型服务
- 支持文本输入方式与AI助手对话
- 通过自然语言控制3D模型行为
- 自动检测Ollama服务状态并提供连接反馈

#### 2.1.3 语音控制
- 支持语音输入转文本功能
- 通过语音命令控制模型动作
- 提供语音识别状态反馈

#### 2.1.4 手势识别控制（规划中）
- 通过摄像头捕捉用户手势
- 识别特定手势并转换为模型控制命令
- 支持基础手势如指向、抓取等操作

### 2.2 技术特点

#### 2.2.1 现代化UI设计
- 采用科技感主题设计
- 支持暗色模式
- 响应式布局适配不同设备
- 流畅的动画过渡效果

#### 2.2.2 高性能渲染
- 基于Three.js的WebGL渲染
- 优化的3D模型加载和渲染流程
- 支持模型动画系统

#### 2.2.3 多模态交互
- 集成文本、语音、手势等多种交互方式
- 智能识别用户意图并执行相应操作
- 提供实时反馈机制

#### 2.2.4 本地AI能力
- 支持本地部署的Ollama大语言模型
- 无需云服务即可实现智能交互
- 保护用户隐私数据

## 3. 系统架构

### 3.1 总体架构
智趋3D交互系统采用前端单页应用架构，主要由以下几个部分组成：
- 渲染引擎：基于React Three Fiber的3D渲染系统
- 交互控制：包括UI控制、语音控制、手势控制等模块
- AI服务连接：与本地Ollama服务通信的接口
- 资源管理：3D模型加载和管理系统

### 3.2 技术栈
- 前端框架：React.js
- 构建工具：Vite
- 3D引擎：Three.js、React Three Fiber、Drei
- AI模型：Ollama (Qwen2.5:7b)
- 语音识别：Web Speech API
- 手势识别：TensorFlow.js、MediaPipe

### 3.3 模块划分

#### 3.3.1 核心应用模块 (App.jsx)
负责整合各功能模块，管理应用状态，提供主界面布局。

#### 3.3.2 3D模型模块
- Model.jsx：处理3D模型的加载、渲染和动画
- ModelLoader.jsx：提供模型加载进度和错误处理
- DefaultModel.jsx：默认模型的实现

#### 3.3.3 交互控制模块
- OllamaChat.jsx：AI对话界面和逻辑实现
- VoiceControl.jsx：语音识别和控制功能
- GestureControl.jsx：手势识别和控制功能

#### 3.3.4 工具类模块
- checkModelAnimations.js：检查模型动画信息
- debugAnimations.js：动画调试工具
- getAnimationNames.js：获取模型动画名称

## 4. 部署要求

### 4.1 硬件要求
- 处理器：支持WebGL的现代CPU
- 内存：4GB及以上
- 显卡：支持WebGL 2.0的GPU
- 摄像头：支持手势识别功能（可选）
- 麦克风：支持语音控制功能（可选）

### 4.2 软件要求
- 操作系统：Windows 10/11、macOS 10.15+、Linux
- 浏览器：Chrome 90+、Firefox 90+、Safari 15+、Edge 90+
- Ollama：本地安装Ollama服务并加载qwen2.5:7b模型
- Node.js：v16+（仅开发环境需要）

### 4.3 网络要求
- 本地网络连接（用于连接Ollama服务）
- 首次加载3D模型需要网络连接

## 5. 安装与配置

### 5.1 开发环境配置
1. 安装Node.js和npm
2. 克隆项目代码
3. 执行`npm install`安装依赖
4. 执行`npm run dev`启动开发服务器

### 5.2 生产环境部署
1. 执行`npm run build`生成生产环境代码
2. 将dist目录部署到Web服务器

### 5.3 Ollama配置
1. 从官方网站下载并安装Ollama
2. 执行`ollama pull qwen2.5:7b`下载模型
3. 启动Ollama服务

## 6. 使用说明

### 6.1 基本操作
- 鼠标拖拽：旋转视角
- 鼠标滚轮：缩放模型
- 右键拖拽：平移视角

### 6.2 控制面板
- 向左旋转：将模型向左旋转45度
- 向右旋转：将模型向右旋转45度
- 重置位置：将模型恢复到初始位置
- 最小化/展开：控制面板的显示状态

### 6.3 AI对话
- 文本输入：在对话框中输入文本并发送
- 语音输入：点击麦克风图标开始语音输入
- 支持的命令：包含"旋转"、"行走"、"跳跃"等关键词的指令

### 6.4 状态指示
- Ollama服务状态：显示AI服务连接状态
- 模型加载进度：显示3D模型的加载进度
- 语音识别状态：显示语音输入的识别状态

## 7. 技术实现细节

### 7.1 3D渲染实现
系统使用React Three Fiber作为Three.js的React封装，实现声明式的3D场景构建。通过useGLTF和useAnimations钩子加载和控制3D模型，支持动画播放和模型操作。

### 7.2 AI交互实现
系统通过HTTP请求与本地Ollama服务通信，发送用户输入并接收AI响应。通过关键词匹配将AI回复转化为模型控制命令，实现自然语言控制3D模型的效果。

### 7.3 语音控制实现
利用Web Speech API的SpeechRecognition接口实现语音识别，将识别结果转换为文本后发送给AI服务，实现语音到动作的转换流程。

### 7.4 UI主题实现
采用CSS变量定义主题色彩和效果，实现统一的科技感视觉风格。使用CSS动画和过渡效果增强用户体验，提供流畅的交互反馈。

## 8. 未来规划

### 8.1 功能扩展
- 支持更多3D模型格式
- 增强手势识别精度
- 添加模型材质和环境定制功能
- 支持多模型场景

### 8.2 性能优化
- 实现模型LOD（细节层次）系统
- 优化大型模型的加载性能
- 实现场景预加载机制

### 8.3 交互增强
- 支持VR/AR模式
- 增加协作功能
- 实现更复杂的语音和手势命令

## 9. 版权和许可

© 2023-2024 智趋科技

本软件为原创开发，版权所有，未经授权不得复制、修改或分发。